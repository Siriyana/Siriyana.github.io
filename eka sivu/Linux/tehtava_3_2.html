<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tehtävä 3.2.</title>
    <link rel="stylesheet" href="linux.css">
</head>
<body>
    <header>Linux-peruskurssi <img src="pingviini.png"></header>
    <h1>Veeran kurssitehtävät 3.2.</h1>

    <main>
        <article>
            <h1>Komentorivityökaluja: GREP, SED, AWK</h1>

                <h2>GREP</h2>
                <ul>
                    <li>
                        <p>a) Henkilötunnuksen etsiminen</p>
                        <p>Lausekkeen luominen henkilötunnuksen etsimiseen oli todella haastavaa, sillä on niin paljon sääntöjä, jotka piti ottaa huomioon ja voi olla, että jokin jäi vielä huomiotta. Loin teksti-tiedostoon muutamia keksittyjä henkilötunnuksia ja ei-henkilötunnuksia. Sen jälkeen yritin hakea niitä ei henkilötunnusten joukosta. Hakulausekkeeseen piti määritellä päivämäärän kohdalle putkituksen avulla ehtoja, jotta hakuun tulisi vain 01-31 väliltä päivämääriä. Kuukauden kohdalla piti myös määritell tai-lausekkeita, jotta löytyisi vain ne, joissa oikea kuukausi 01-12. Vuoden kohdalle hyväksyin kaikki luvut 00-99 väliltä. Tässä toki nyt ongelma on se, että tulokseen tulisi nyt myös tulevia vuosilukua. Välimerkiksi hyväksyin -Aa, koska - tarkoittaa 1900-luvulla syntyneitä ja a-2000-luvulla syntyneitä ja ajattelin, että a voi olla isossa tai pienessä muodossa. Henkilötunnuksen loppuosassa kolme ensimmäistä voi olla mikä vaan numero, mutta viimeinen voi olla numero tai kirjain.</p>
                        <figure><img src="3_2_tehtava1a.png"></figure>
                    </li>
                    <li>
                        <p>b) Sähköpostin etsiminen</p>
                        <p>Alkujaan tämä kuulosti helpolta, sillä materiaali-videossa oli esimerkki sähköpostin etsimisestä.</p>
                        <p>Ensimmäinen yritys toi liikaa vaihtoehtoja, sillä ilmeisesti *-merkki voi olla myös tyhjä. Toinen yritys oli jo parempi ja sain vain sähköpostiosoitteista, jotka olivat muotoa nimi.nimi@domain.domain.</p>
                        <figure><img src="3_2_tehtava1b_osa1.png"></figure>
                        <p>Mutta tarkemmin katseltuani, tajusin, että tämä haku jätti tulostamatta kolme oikeanmuotoista sähköpostiosoitetta kahdelta eri riviltä: <i>harjoiTusmateriaalina onni.opiskleija@sci.fi grepin ja SEDin käytössä.</i> ja <i>matti.meikä@suomi.fi & matti.meikä@finland.fi</i> </p>
                        <p>Millään omalla yrityksellä on saanut näitä tulostumaan. Päätin ottaa chatGPT:n käyttöön, mutta hänenkään avulla en päässyt kovin paljoa pidemmällä, mutta sain yhden karkulaiset lisää tulostettua, mutta itse en tällaista lausetta olisi osannut muodostaa:</p>
                        <figure><img src="3_2_tehtävä1b_tarkennusta.png"></figure>
                        <p>Loppujen osalta ChatGPT:kin luovutti ja yritti ehdottaa pythonilla ohjelmoimista...</p>
                        <p>Eli jostain syystä mitenkään en saanut tulostettua riviltä <i>matti.meikä@suomi.fi & matti.meikä@finland.fi</i> kumpaakaan sähköpostia, vaikka ovat oikean muotoisia...</p>
                        <p>En pystynyt antamaan asian olla ja ratkaisua piti yrittää edelleen. Googlen avulla löysin erilaisen version, jota kokeilla, mutta luonnollisesti sekään ei toiminut, vaan toi noita sähköpostiosoitteita, jotka eivät noudattaneet nimi.nimi@domain.domain -muotoa...</p>
                        <figure><img src="3_2_1b googlattu ei_toimi_edellee.png"></figure>
                        <p>Puolen tunnin tekoälyn kanssa viilailun jälkeen chatGPT vihdoin sai minulle ratkaisun googlesta löydetyn version pohjalta tähän ongelmaan, mutta ei todellakaan ollut minun aivoilla ratkaistavissa...</p>
                        <figure><img src="3_2_googlen_ja_chatGPT_avulla_saatu_ratkaisu.png"></figure>
                        <p>Tämä oli todella haastava...</p>
                    </li>
                    <li>
                        <p>c) Vakiomuotoisen IP-osoitteen etsiminen</p>
                        <p>Hakukomennossa etsitään ensin kolmea numero-sarjaa, joissa voi olla 1-3 numeroa ja joka päättyy . ja viimeinen osassa etsitään numerosarjaa, jossa 1-3 numeroa ja jonka jälkeen ei tule mitään. Haku tulostaa koko rivin.</p>
                        <figure><img src="3_2_tehtava1c.png"></figure>
                        <p>Tulostus vielä ilman muita tietoja riviltä</p>
                        <figure><img src="3_2_tehtava1c vain numerot.png"></figure>
                    </li>
                    <li>
                        <p>d) Tiedoston lataaminen ja "asianajaja", "poliisi" ja "lääkäri" etsiminen tiedostosta.</p>
                        <p>Ensimmäiset hakukomennot epäonnistuivat, kun ensimmäisessä haettiin väärästä tiedostosta ja tokasta jäi jälkimmäinen putkitus pois. Kolmas kerta toden sanoo ja se onnistui.</p>
                        <figure><img src="3_2_tehtava1d.png"></figure>
                    </li>
                    <li>
                        <p>e) "Tohtori Jekyll" -sanan etsiminen ja löydettyjen sanojen lukumäärän laskeminen</p>
                        <p>Ensin testasin, Tohtori Jekyllin tulostamisen (ja nähdäkseni, kuinka monta kertaa tulostuu :D). Sen jälkeen virheellinen kokeilu Tohtori Jekyllin esiintymisen laskemiseksi, mutta seuraava onnistui. Eli Tohtori Jekyll esiintyy tiedostossa viisi kertaa.</p>
                        <figure><img src="3_2_tehtava1e.png"></figure>
                    </li>
                    <li>
                        <p>f) Etsi rivit, jotka eivät sisällä "elämä", "ei" ja "kuolema" sekä tulosta rivinumerot riveistä, joilta nämä sanat löytyvät</p>
                        <p>Ensin hain rivin, jotka eivät sisällä "elämä", "ei" tai "kuolema" sanaa ja näitä oli aika paljon.</p>
                        <figure><img src="3_2_tehtava1f_rivit jotka ei sisalla.png"><img src="3_2_tehtava1f_rivit jotka ei sisalla maata.png"></figure>
                        <p>Sen jälkeen kokeilin hakea rivit, joilla nämä sanat esiintyy ja sen jälkeen vain rivinumerot näistä riveistä, joissa sanat esiintyvät.</p>
                        <figure><img src="3_2_tehtava1f_rivit joissa on ja rivinumero.png"> <img src="3_2_tehtava1f_vain_rivinumerot.png"></figure>
                        <p>Yritin yhdistää hakukomennot niin, että tulostaisi rivit, joissa kyseiset sanat eivät esiinnyt, ja samalla myös rivinumeron niistä riveistä, joissa sanat esiintyvät. Tämä ei minulta onnistunut, vaan kyseinen haku tulosti vain rivinumerot niistä, missä sanat esiintyvät, mutta ei niitä rivejä, joilla sanat eivät esiintyneet.</p>
                        <figure><img src="3_2_tehtava1f_epaonnistunut yhdistamisyritys.png"></figure>
                        <p>Omat aivot eivät vain kyenneet ratkaisemaan tätä yhdistämisongelmaa, jossa tulostuisi niin ne rivit, joissa sanat eivät esiinny ja rivinumerot niistä, joissa esiintyy.</p>
                        <p>Tekoälyn kanssa jumppaamalla tuli tällainen ratkaisu, jota en olisi kyllä itse pystynyt mitenkään keksimään ja en tiedä, toimiiko sekään ihan halutulla tavalla: ensin tulostuu rivit, joilla sanat ei esiinny ja näiden rivien jälkeen tulee vain rivinumerot niistä riveistä, joilla sanat ovat.</p>
                        <figure><img src="3_2_tehtava1f_tekoalyn ratkaisu.png"><img src="3_2_tehtava1f_tulostuksenVaihto.png"></figure>
                    </li>
                </ul>

                
                <h2>AWK</h2>
                <ul>
                    <li>
                        <p>a) Etunimien ja puhelinnumeroiden tulostus AWK-työkalun avulla</p>
                        <p>Hetken aikaa kesti löytää ja ymmärtää, miten nimen saisi pilkottua palasiksi niin, että vain etunimi tulostuisi.</p>
                        <figure><img src="3_2_tehtava2a.png"></figure>
                    </li>
                    <li>
                        <p>b) Henkilöiden nimi, katuosoite ja asuinmaa erotettuna sarkaimella sekä lista tulostettuna aakkosjärjestyksen mukaan</p>
                        <p>Listasta poistettu ensimmäinen rivi (Nimikerivi: First, Address) komennon osuudella NR != 1. Itseä ärsytti se, kun sarakkeet menivät ihan hassusti, sillä vaikka väleissä oli tabulaattorin verran tyhjää, niin sarakkeiden sisällön vaihtelevien pituuksien takia rivit olivat miten olivat. </p>
                        <figure><img src="3_2_tehtava2b_huono yritys.png"></figure>
                        <p>Kun välit oli määritelty tabillä, niin järjestäminen sort -k3 komennolla onnistui, mutta näin ihmissilmään näyttää aika hirveältä lukea...</p>
                        <figure><img src="3_2_tehtava2b_tab_maat.png"></figure>
                        <p>Seuraavia yrityksiä: ainakin välit sain niin, että miellyttävät omaa silmää enemmän. Mutta järkkääminen on haastavaa, vaikka netistä löytyi, että sort -k valinnalla saisi valittua sen sarakkeen, minkä mukaan järjestetään, niin ilmeisesti se kuitenkin "tunnistaa" sarakkeeksi aina välilyönnin jälkeen. Eli sort -k3, saan järkättyä sukunimen mukaan (kun kaikissa on etunimi ja keskimmäisen nimen kirjain), mutta koska osoitteet ovat hyvin vaihtelevia, niin tämä tapa ei toimi kovin paljoa pidemmälle (Trust me, kokeilin aika pitkälle ja tajusin, ettei vaan loppuvaiheessa missään vaiheessa täsmäisi...)</p>
                        <figure><img src="3_2_tehtava2b_kun_saisi_vielä_järjestykseen.png"></figure>
                        <p>En keksinyt mitään keinoa ja tekoälynkään ehdotukset eivät toimineet...Vain laittamalla maan ensiksi saan järjestettyä maan mukaan...</p>
                        <figure><img src="3_2_tehtava2b_ei_onnistunut.png"></figure>
                        <p>Tulostuksen järjestäminen maan mukaan, niin että järjestettiin 70 merkin kohdalla (koska ensimmäisten sarakkaiden leveys on 30 ja 40 merkkiä, niin kolmas, eri maa-sarake alkaa merkistä 70. Ja tämä vihdoin toimi! :)</p>
                        <figure><img src="3_2_tehtava2b_jarjestyksessa.png"></figure>
                    </li>
                    <li>
                        <p>c) Mielipidekyselyn tulosten laskeminen: kuinka monta "kyllä" ja kuinka monta "ei" ääntä, esitettynä lukuina ja prosennteina.</p>
                        <p>Testailujen jälkeen sain jo aika hyvin laskettua ja tulostettua, mutta prosenttien tulostuksen asettelun kanssa haasteita ja miten saada vain muutaman desimaalin tarkkuudella..</p>
                        <figure><img src="3_2_tehtava2c_ei_ihan.png"></figure>
                        <p>Googlen ja tekoälyn avulla sain vihdoin myös prosenttiosuuden kauniisti tulostettua yhden desimaalin tarkkuudella, mutta en olisi itse osannut.</p>
                        <figure><img src="3_2_tehtava2c_tekoalyn avulla.png"></figure>
                    </li>
                    <li>
                        <p>d) Helsingin Yliopiston almanakkasivuilta nimipäiväsankarien tulostus ilman HTML-tägejä.</p>
                        <p>Kokeilin erilaisia grep-hakuja, jotta pystyisin paikantamaan millaisten elementtien sisällä nimipäiviä voisi löytyä. Ja sitten miettimään, millä ihmeen hakukomennoilla saisi kohdennettua nameday-names-luokkiin ja saisi ne nimet sieltä tulostettua.</p>
                        <figure><img src="3_2_tehtava2d_esihaku.png"><img src="3_2_tehtava2d_miten_saada_ulos_nimet_tästä.png"></figure>
                        <p>Malliratkaisun pohjalta kokeilua. Loin omasta index.html -tiedostosta ensin myös data.txt tiedoston. Mutta siitä huolimatta omassa tiedostossa on jotain, jonka vuoksi ei toimi.</p>
                        <figure><img src="3_2_tehtava2d_kokeilua_tuntimallin_lauseella.png"></figure>
                        <p>Kokeilin muuttaa br-elementin tilalle nameday-names, jolla aikaisemmin olin saanut nimiä näkyville ja se toimi osittain, mutta haki myös paljon enemmän kuin vain nimet.</p>
                        <figure><img src="3_2_tehtava2d_kokeilua_tuntimallin perusteella.png"></figure>
                        <p>Ratkaisu, joka vaati ensi ntekoälyn ideointia ja sen jälkeen aika paljon manuaalista kokeilua kaikkien nimien tulostukseen saamiseksi ja mitkä sarakkeet sisälsivät html-elementtejä ja mitkä nimiä. Mutta onnistui lopulta.</p>
                        <figure><img src="3_2_tehtava2d_manuaalista_kokeilua_kunnes_kaikki.png"></figure>
                    </li>
                </ul>

                
                <h2>SED</h2>
                <p>Loin kopion tiedostosta pg14152.txt, jolla tein harjoituksia. Ihan vain, että koska halusin pitää alkuperäisen vielä koskemattomana, ja voisin aina 100% varmuudella aloittaa alusta. Ja en uskaltanut luottaa, että on varmuuskopiot varmasti. :p</p>
          
                <ul>
                    <li>
                        <p>a) Etsi ja korvaa "lääkäri" sanalla "puoskari".</p>
                        <p>Haettu ensin lääkäri-sanat tiedostosta, sen jälkeen sedillä määritelty komento lääkäri-sanan vaihtamiseksi puoskari-sanalla ja muutosten tallentamiseksi suoraan tiedostoon ja sen jälkeen testattu vielä haulla, että toimiko.</p>
                        <figure><img src="3_2_tehtava3a.png"></figure>
                    </li>
                    <li>
                        <p>b) Rivien, joilla esiintyy sana "maailma", poistaminen</p>
                        <p>Poistettu rivit, joissa esiintyy "maailma", mutta ei tallennettu tiedostoon. Joten ei tarkastusta tämän tehtävän kohdalla.</p>
                        <figure><img src="3_2_tehtava3b.png"></figure>
                    </li>
                    <li>
                        <p>c) Hakeminen ja korvaaminen kolmella eri hakusanalla samalla komennolla</p>
                        <p>Haettu muutettavat sanat, tehty SEDillä komento kolmen eri sanan korvaamiseksi. Tallennettu muutokset tiedostoon, jotta muutosten onnistumisen voi tarkistaa.</p>
                        <figure><img src="3_2_tehtava3c.png"></figure>
                    </li>
                    <li>
                        <p>d) Sanan "Enfield" etsiminen ja lainausmerkkien lisääminen sanan ympärille </p>
                        <p>Ensimmäinen yritys paljasti, ettei Enfield-sanojen ympäröiminen lainausmerkillä ollut niin simppeli, sillä unohdin, että suomen kielessä sanat taipuvat ja lainaismerkit eivät näytä kovin hyvältä sanan keskellä.</p>
                        <figure><img src="3_2_tehtava3d_ekayritys.png"></figure>
                        <p>Googlailun ja erilaisten kokeilujen jälkeen löytyi onnistunut lause.</p>
                        <figure><img src="3_2_tehtava3d_onnistunut.png
                            "></figure>
                    </li>

                </ul>

                <h2>Tekstitiedostojen manipulointi</h2>
                <ul>
                    <li>
                        <p>a) Kolmen tiedoston yhdistäminen yhdeksi.</p>
                        <p>Ensimmäinen kokeilu ei asettunut nätisti, sillä olin luonut tiedostot niin, että kaikissa tiedostoissa oli tiedot yhdellä rivillä. Kun muokkasin alkutiedostoja niin, että jokainen tieto on omalla rivillä, niin yhdistämisen jälkeen sisällön asettelu oli parempi.</p>
                        <figure><img src="3_2_tehtava4a.png"><img src="3_2_tehtava4a_nätimpi.png"></figure>
                    </li>
                    <li>
                        <p>b) Tiedoston pg14152 tutkiminen: kuinka monta riviä ja tiedoston jakaminen osiin.</p>
                        <p>Defaul-oletuksena on, että split-komento jakaa tiedoston osiin, niin, että jokaisessa osassa on tuhat riviä.</p>
                        <figure><img src="3_2_tehtava4b_default.png"><img src="3_2_tehtava4b.png"><img src="3_2_tehtava4brivit.png"></figure>
                    </li>
                    <li>
                        <p>c) Tiedoston pg14152 jakaminen tiedostoihin, joissa jokaisessa 500 riviä </p>
                        <figure><img src="3_2_tehtava4c.png"></figure>
                    </li>
                    <li>
                        <p>d) Rivien 200-300 välillä olevien rivien poistaminen </p>
                        <figure><img src="3_2_tehtava4d.png"></figure>
                    </li>

                </ul>

            </article>

        </article>

        <article>
            <h2>Murhamysteerin ratkaiseminen terminaalityökalujen avulla</h2>
            <figure><img src="3_2_mystery.png"></figure>
            <p>Aloitettu murhamysteerin selvittäminen, sillä että haetaan poliisin havaitsemat vihjeet tiedostoista. Epäilty on pitkä mies ja rikospaikalta löytyi lompakko, jonka epäillään kuuluneen tappajalle. Lompakosta ei löydy nimeä, mutta löytyy jäsenkortit organisaatioille: AAA, Delta SkyMiles, kirjastoon ja Museoon.</p>
            <figure><img src="3_3_mystery_clue.png"></figure>
            <p>Vertailtu eri jäsenyyksiä ja luotu ensin tiedostoja, joissa on on kahden eri yrityksen yhteiset jäsenet ja sitten näistä vielä luotu lista ihmisistä, jotka ovat jäseninä kaikissa neljässä yrityksesä (AAA, Delta SkyMiles, library ja Museum of Bash History). Tallennettu nämä henkilöt tiedostoon epaillyt.</p>
            <figure><img src="3_3_epaillyt.png"></figure>
            <p>Rikospaikan vihjeiden mukaan paikallisessa kahvilassa oli nainen, joka lähti vähän ennen ammuskelua. Naisen nimi oli mahdollisesti Annabel, hänellä oli vaalea tukka ja Uusiseelantilainen aksentti. Hän olisi mahdollinen todistaja. People-listalta löytyy neljä eri Annabel-nimistä henkilöä, joista yksi oli mies, joten hänet pystyi jättämään pois listalta.</p>
            <figure><img src="3_3_mystery_mahdollisia uhreja.png"></figure>
            <p>Vihjeessä neuvottiin katsomaan head -komennolla osoitteita todistajien haastattelujen löytämiseksi. Ja tämän jälkeen etsin grepin avulla katu-tiedostoja, joissa oli INTERVIEW ja koska minulla oi tiedossa kolmen mahdollisen Annabelin osoite, niin vain näiden kolmen haastattelua lähdin hakemaan.</p>
            <figure><img src="3_3_mystery_todistajien haastattelut.png"><img src="3_3_mysteri_kolme_mahdollista_todistajaa.png"></figure>
            <p>Todistajan lausunto</p>
            <figure><img src="3_3_mystery_todistajan lausunto.png"></figure>
            <p>Etsitty rekkareita ja rekkareiden omistajien tiedot ja tallennettu ne vecehicle_owners-tiedostoon. Tallennettu tiedostoon epaillyt_omistajat rekkareiden omistajien nimet, jos omistajan pituus oli yli 6.</p>
            <figure><img src="mystery_rekkareita.png"><img src="mystery_rekkarit_nimet_pituudet.png"></figure>
            <p>Verrattu epaillyt_omistajat -tiedostoa aikaisemmin luotuun tiedostoon epaillyt (joka koostui niistä henkilöistä, joilla oli kaikkien neljän organisaation jäsenyys). Näillä kahdella listalla oli kolme eri henkilöä ja etsitty heidän osoitetietojen perusteella heidän haastattelut.</p>
            <figure><img src="mystery_kolme_suspect.png"><img src="mystery_kolmesuspect_info.png"><img src="Mystery_suspect_interviews.png"></figure>
            <p>Tarkistetaan, löytyykö Brian Boyerilta tai Matt Waiteltä myös toinen auto.</p>
            <figure><img src="mystery_no_other_car.png"></figure>
            <p>Ei löytynyt kummaltakaan autoa. Ja tarkistettu vielä solutions-komennolla, eikä kumpikaan ollut tekijä.</p>
            <p>Palattu alkuun ja tajuttu, että rekisterinumeroiden kohdalla olen tehnyt hakulausekkeessa virheen.</p> 
            <p>Etsitty netistä vinkkiä, miten rajata rekisterihakua autoihin, jotka ovat sinisiä hondia ja joiden omistajan pituus on vähintään 6'0".</p> 
            <p>Mutta tämäkään ei auttanut... Tarkistin nämäkin solutions-komennolla varmuuden vuoksi, mutta ei onnannut.</p>
            <figure><img src="uusi_yritys.png"><img src="uusi_yritys2.png"></figure>
            <br>
            <p>Luovutan mysteerin kanssa. Minusta ei ole salapoliisiksi...</p>
            <p>Tai pitänee joskun toiste kokeilla virkeämpien aivojen kanssa...</p>
            <br>
            <p>Jeps. Eli Jeremy Bowers OLI syyllinen, mutta olin kokeillut solutions-komentoa väärässä hakemistossa (en ollut lukenut solutions-ohjetta riittävän tarkasti..), jolloin antoi virheellisen tuloksen.</p>
            <figure><img src="ratkaisu.png"></figure>
        
        
        </article>
        
    </main>
    
</body>
</html>